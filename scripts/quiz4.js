const quiz4 = [  {    question: "Who is credited with founding Brazilian Jiu-Jitsu?",    options: ["Carlos Gracie", "Helio Gracie", "Royce Gracie", "Rickson Gracie"],
    answer: "Helio Gracie"
  },
  {
    question: "What is the name of the famous choke hold used in Brazilian Jiu-Jitsu?",
    options: ["Armbar", "Guillotine", "Rear Naked Choke", "Triangle Choke"],
    answer: "Rear Naked Choke"
  },
  {
    question: "What is the main goal of Brazilian Jiu-Jitsu?",
    options: ["Knock out your opponent", "Submit your opponent", "Injure your opponent", "Pin your opponent"],
    answer: "Submit your opponent"
  },
  {
    question: "Which UFC fighter has a background in Brazilian Jiu-Jitsu and is known for his rubber guard?",
    options: ["Tony Ferguson", "Demian Maia", "Ryan Hall", "Eddie Bravo"],
    answer: "Eddie Bravo"
  },
  {
    question: "What is the name of the highest belt rank in Brazilian Jiu-Jitsu?",
    options: ["Black Belt", "Brown Belt", "Purple Belt", "Red Belt"],
    answer: "Red Belt"
  },
  {
    question: "What is the name of the position in Brazilian Jiu-Jitsu where you are on top of your opponent, with your knees on the ground?",
    options: ["Mount", "Guard", "Half Guard", "Side Control"],
    answer: "Mount"
  },
  {
    question: "What is the name of the famous Brazilian Jiu-Jitsu practitioner who won the first UFC tournament?",
    options: ["Royce Gracie", "Renzo Gracie", "Rickson Gracie", "Helio Gracie"],
    answer: "Royce Gracie"
  },
  {
    question: "What is the name of the Brazilian Jiu-Jitsu technique where you use your legs to control your opponent's body?",
    options: ["Guard", "Half Guard", "Butterfly Guard", "Spider Guard"],
    answer: "Guard"
  },
  {
    question: "What is the name of the Brazilian Jiu-Jitsu technique where you use your opponent's momentum against them?",
    options: ["Sweep", "Submission", "Takedown", "Escape"],
    answer: "Sweep"
  },
  {
    question: "What is the name of the Brazilian Jiu-Jitsu technique where you use your opponent's lapel to choke them?",
    options: ["Lapel Choke", "Ezekiel Choke", "Loop Choke", "Bow and Arrow Choke"],
    answer: "Lapel Choke"
  },{    question: "What is the name of the Brazilian Jiu-Jitsu position where you are on your back, with your legs wrapped around your opponent's waist?",    options: ["Guard", "Mount", "Side Control", "North-South"],
  answer: "Guard"
},
{
  question: "What is the name of the Brazilian Jiu-Jitsu technique where you use your legs to attack your opponent's upper body?",
  options: ["Triangle Choke", "Armbar", "Omoplata", "Kimura"],
  answer: "Triangle Choke"
},
{
  question: "What is the name of the Brazilian Jiu-Jitsu technique where you use your legs to control your opponent's hips?",
  options: ["Closed Guard", "Half Guard", "Butterfly Guard", "Spider Guard"],
  answer: "Butterfly Guard"
},
{
  question: "What is the name of the Brazilian Jiu-Jitsu technique where you use your opponent's lapel to control them?",
  options: ["Spider Guard", "Worm Guard", "Lasso Guard", "Deep Half Guard"],
  answer: "Worm Guard"
},
{
  question: "What is the name of the Brazilian Jiu-Jitsu technique where you use your opponent's gi to choke them?",
  options: ["Gi Choke", "Collar Choke", "Cross Choke", "Bow and Arrow Choke"],
  answer: "Cross Choke"
},
{
  question: "What is the name of the Brazilian Jiu-Jitsu technique where you use your opponent's lapel to sweep them?",
  options: ["Flower Sweep", "Scissor Sweep", "X-Guard Sweep", "Sickle Sweep"],
  answer: "Flower Sweep"
},
{
  question: "What is the name of the Brazilian Jiu-Jitsu position where you are on your side, with your bottom leg hooked behind your opponent's knee?",
  options: ["Half Guard", "Butterfly Guard", "Spider Guard", "De La Riva Guard"],
  answer: "Half Guard"
},
{
  question: "What is the name of the Brazilian Jiu-Jitsu technique where you use your opponent's momentum to take their back?",
  options: ["Back Take", "Arm Drag", "Kimura Trap", "Scissor Sweep"],
  answer: "Arm Drag"
},
{
  question: "What is the name of the Brazilian Jiu-Jitsu technique where you use your legs to attack your opponent's ankle?",
  options: ["Heel Hook", "Toe Hold", "Kneebar", "Calf Slicer"],
  answer: "Heel Hook"
},
{
  question: "What is the name of the Brazilian Jiu-Jitsu position where you are on top of your opponent, with your knees on their chest?",
  options: ["Knee on Belly", "Mount", "Side Control", "North-South"],
  answer: "Knee on Belly"
},{
    question: "What is the meaning of 'jiu-jitsu' in Japanese?", 
    options: ["gentle art", "hard art", "fast art", "slow art"], 
    answer: "gentle art"
  },
  {
    question: "What is the name of the basic guard position in BJJ?", 
    options: ["Spider Guard", "Closed Guard", "Butterfly Guard", "De la Riva Guard"], 
    answer: "Closed Guard"
  },
  {
    question: "What is the name of the choke that uses the opponent's gi lapel?", 
    options: ["Triangle Choke", "Armbar", "Ezekiel Choke", "Omoplata"], 
    answer: "Ezekiel Choke"
  },
  {
    question: "What is the name of the BJJ belt rank just below black belt?", 
    options: ["Brown Belt", "Purple Belt", "Blue Belt", "White Belt"], 
    answer: "Brown Belt"
  },
  {
    question: "What is the name of the technique used to escape mount?", 
    options: ["Scissor Sweep", "Bridging", "Shrimp", "Hip Escape"], 
    answer: "Hip Escape"
  },
  {
    question: "What is the name of the choke that uses the opponent's own lapel?", 
    options: ["Brabo Choke", "Clock Choke", "Loop Choke", "Bow and Arrow Choke"], 
    answer: "Loop Choke"
  },
  {
    question: "What is the name of the submission that targets the opponent's ankle?", 
    options: ["Triangle Choke", "Armbar", "Kneebar", "Kimura"], 
    answer: "Kneebar"
  },
  {
    question: "What is the name of the BJJ academy founded by Carlos Gracie Jr.?", 
    options: ["Gracie Barra", "Gracie Humaita", "Alliance Jiu-Jitsu", "Checkmat"], 
    answer: "Gracie Barra"
  },
  {
    question: "What is the name of the BJJ technique that translates to 'bow and arrow'?", 
    options: ["Berimbolo", "X-Guard", "De la Riva Guard", "Fifty/50 Guard"], 
    answer: "Bow and Arrow Choke"
  },
  {
    question: "What is the name of the BJJ competition that takes place in Abu Dhabi?", 
    options: ["World Championships", "Pan Championships", "ADCC", "Copa Podio"], 
    answer: "ADCC"
  }
];


var bjjBigContainer = document.getElementById("bjj-quiz-container");
var bjjBiggerContainer = document.getElementById("bjj-gigachad-container");
var bjjResultContainer = document.getElementById("bjj-result-container");
var getResultBjjButton = document.getElementById("get-result-bjj-button");

var bjjRefreshPage = document.getElementById("bjj-refresh-page");
bjjRefreshPage.addEventListener("click",function(){
    location.reload();
});

if(bjjBigContainer.textContent.trim() === ""){

    const p = document.createElement("p");
    p.textContent = "Are you ready to start the quiz?";
    p.setAttribute("class","empty-container-p");


    const a = document.createElement("a");
    a.textContent = "I am ready!";
    a.setAttribute("href", "#");
    a.setAttribute("id","bjj-quiz-button");
    a.setAttribute("onclick","createBjjQuiz()");
    a.setAttribute("class","start-button-page");

    bjjBigContainer.appendChild(p);
    bjjBigContainer.appendChild(a);

}

function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function createBjjQuiz(){

    const quizQuestions = shuffle(quiz4).slice(0, 10);


    let quizHTML = "";
    quizQuestions.forEach(function(q, i) {
    quizHTML += "<div class='quiz-container'><p>" + (i + 1) + ". " + q.question + "</p>";   
    quizHTML += '<input type="hidden" value="'+ q.answer + '" name="q' + i + 'correct">';
    q.options.forEach(function(opt) {
        quizHTML += '<label class="radio-button-container">' + opt + '';
        quizHTML += '<input type="radio" name="q' + i + '" value="' + opt + '">';
        quizHTML += '<span class="checkmark"></span>';
        quizHTML += "</label>";
    });
    quizHTML += "</div>";
  });

  getResultBjjButton.style.display = "block";
  bjjBigContainer.innerHTML = quizHTML;
}


getResultBjjButton.addEventListener("click", function() {
    // Calculate the user's score
    let score = 0;
    const quizQuestionsOne = bjjBigContainer.querySelectorAll("div");
    let allQuestionsAnswered = true;

    for(let i =0;i<quizQuestionsOne.length;i++){
        const radios = quizQuestionsOne[i].querySelectorAll("input[type=radio]");
        let anyRadioChecked = false;

        for(let j=0; j<radios.length;j++){
            if(radios[j].checked){
                anyRadioChecked = true;
                break;
            }
        }

        if(!anyRadioChecked){
            allQuestionsAnswered = false;
            break;
        }
    }

    if(!allQuestionsAnswered){
        alert("Please answer all questions before submitting!");
    }


    quizQuestionsOne.forEach(function(q, i) {
      const selected = q.querySelector("input:checked");

      const correctAnswer = q.querySelector("input[type=hidden][name=q"+ i + "correct]");
      const correctAnswerValue = correctAnswer.value;
      console.log(correctAnswerValue);
      if (selected.value == correctAnswer.value) {
        score++;
      }
    });

    const bjjGoodResultImages = ["bjj-good-result1.jpg","bjj-good-result2.jpg","bjj-good-result3.jpg","bjj-good-result4.webp","bjj-good-result5.webp"];
    const bjjBadResultImages = ["bjj-bad-result1.png","bjj-bad-result2.jpg","bjj-bad-result3.jpg","bjj-bad-result4.jpg","bjj-bad-result5.jpg"];
    
    function generateRandomPicture(array){
        var randomPicture = Math.floor(Math.random() * array.length);
        return array[randomPicture];
    }

    var randomGoodResultImage = generateRandomPicture(bjjGoodResultImages);
    var randomBadResultImage = generateRandomPicture(bjjBadResultImages);

    // Display the user's score
    var bjjResultSmallContainer = document.getElementById("bjj-result-small-container");
    bjjResultContainer.style.display = "block";
    bjjBiggerContainer.style.display = "none";

    let resultPageHTML = "";
    if(score < 5){
        resultPageHTML += '<h1 id="submit-page-heading">Better luck next time!</h1>';
        resultPageHTML += '<h2><span id="boxing-result-points">You got ' + score + ' out of 10 question correct!</span></h2>';
        resultPageHTML += '<img src="images/' + randomBadResultImage + '" alt="">';
    }else if(score > 5){
        resultPageHTML += '<h1 id="submit-page-heading">Congratulations!</h1>';
        resultPageHTML += '<h2><span id="boxing-result-points">You got ' + score + ' out of 10 question correct!</span></h2>';
        resultPageHTML += '<img src="images/' + randomGoodResultImage + '" alt="">';
    }


    bjjResultSmallContainer.innerHTML = resultPageHTML;
  });