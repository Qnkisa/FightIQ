const quiz3 = [{    
    question: "What does MMA stand for?", options: ["Mixed Martial Arts", "Mighty Martial Arts", "Martial Mastery Association", "Modern Martial Arts"], answer: "Mixed Martial Arts"
  },{
    question: "What is the name of the UFC's current lightweight champion?", options: ["Khabib Nurmagomedov", "Conor McGregor", "Charles Oliveira", "Dustin Poirier"], answer: "Charles Oliveira"
  },{
    question: "What is the name of the famous retired UFC fighter known for his Brazilian Jiu-Jitsu skills?", options: ["Anderson Silva", "Chuck Liddell", "Georges St-Pierre", "Royce Gracie"], answer: "Royce Gracie"
  },{
    question: "Which martial art does UFC fighter Israel Adesanya primarily use?", options: ["Wrestling", "Judo", "Kickboxing", "Boxing"], answer: "Kickboxing"
  },{
    question: "What is the name of the UFC's current welterweight champion?", options: ["Kamaru Usman", "Jorge Masvidal", "Colby Covington", "Tyron Woodley"], answer: "Kamaru Usman"
  },
  {
    question: "What is the name of the famous retired UFC fighter known for his knockout power?",
    options: ["Vitor Belfort", "Matt Hughes", "Randy Couture", "Chuck Liddell"],
    answer: "Chuck Liddell"
  },
  {
    question: "Which UFC fighter has the nickname 'The Notorious'?",
    options: ["Conor McGregor", "Nate Diaz", "Tony Ferguson", "Dustin Poirier"],
    answer: "Conor McGregor"
  },
  {
    question: "What is the name of the famous retired UFC fighter known for his wrestling?",
    options: ["Khabib Nurmagomedov", "Brock Lesnar", "Daniel Cormier", "Rashad Evans"],
    answer: "Daniel Cormier"
  },
  {
    question: "Which UFC fighter has the nickname 'The Last Stylebender'?",
    options: ["Israel Adesanya", "Jon Jones", "Francis Ngannou", "Alexander Volkanovski"],
    answer: "Israel Adesanya"
  },
  {
    question: "What is the name of the UFC's current heavyweight champion?",
    options: ["Stipe Miocic", "Francis Ngannou", "Alistair Overeem", "Cain Velasquez"],
    answer: "Francis Ngannou"
  },
  {    question: "What is the name of the UFC's current women's bantamweight champion?",    options: ["Valentina Shevchenko", "Amanda Nunes", "Weili Zhang", "Rose Namajunas"],
    answer: "Amanda Nunes"
  },
  {
    question: "What is the name of the retired UFC fighter who was known for his unorthodox fighting style?",
    options: ["Dominick Cruz", "Uriah Hall", "Anthony Pettis", "Lyoto Machida"],
    answer: "Anthony Pettis"
  },
  {
    question: "Which martial art does UFC fighter Demian Maia primarily use?",
    options: ["Wrestling", "Judo", "Brazilian Jiu-Jitsu", "Boxing"],
    answer: "Brazilian Jiu-Jitsu"
  },
  {
    question: "What is the name of the retired UFC fighter known for his striking skills and colorful personality?",
    options: ["Mauricio Rua", "Quinton Jackson", "Gegard Mousasi", "Michael Bisping"],
    answer: "Michael Bisping"
  },
  {
    question: "What is the name of the UFC's current flyweight champion?",
    options: ["Deiveson Figueiredo", "Henry Cejudo", "Brandon Moreno", "Joseph Benavidez"],
    answer: "Brandon Moreno"
  },
  {
    question: "What is the name of the famous retired UFC fighter known for his devastating kicks?",
    options: ["Mirko Cro Cop", "Mark Hunt", "Junior dos Santos", "Alistair Overeem"],
    answer: "Mirko Cro Cop"
  },
  {
    question: "Which UFC fighter has the nickname 'The Eagle'?",
    options: ["Khabib Nurmagomedov", "Alexander Volkanovski", "Max Holloway", "Brian Ortega"],
    answer: "Khabib Nurmagomedov"
  },
  {
    question: "What is the name of the UFC's current women's strawweight champion?",
    options: ["Joanna Jedrzejczyk", "Jessica Andrade", "Carla Esparza", "Rose Namajunas"],
    answer: "Rose Namajunas"
  },
  {
    question: "Which UFC fighter has the nickname 'Bones'?",
    options: ["Jon Jones", "Israel Adesanya", "Stipe Miocic", "Derrick Lewis"],
    answer: "Jon Jones"
  },
  {
    question: "What is the name of the famous retired UFC fighter known for his grappling skills?",
    options: ["Matt Hughes", "Ken Shamrock", "Frank Mir", "Royce Gracie"],
    answer: "Frank Mir"
  },{    question: "What is the name of the retired UFC fighter known for his brutal knockout power and colorful personality?",    options: ["Chuck Liddell", "Wanderlei Silva", "Mauricio Rua", "Rampage Jackson"],
  answer: "Chuck Liddell"
},
{
  question: "Which UFC fighter has the nickname 'The Last Stylebender'?",
  options: ["Israel Adesanya", "Anderson Silva", "Kelvin Gastelum", "Vitor Belfort"],
  answer: "Israel Adesanya"
},
{
  question: "What is the name of the UFC's current featherweight champion?",
  options: ["Alexander Volkanovski", "Max Holloway", "Brian Ortega", "JosÃ© Aldo"],
  answer: "Alexander Volkanovski"
},
{
  question: "What is the name of the retired UFC fighter known for his dominant wrestling skills?",
  options: ["Georges St-Pierre", "Khabib Nurmagomedov", "Daniel Cormier", "Brock Lesnar"],
  answer: "Georges St-Pierre"
},
{
  question: "Which martial art does UFC fighter Israel Adesanya primarily use?",
  options: ["Muay Thai", "Boxing", "Wrestling", "Judo"],
  answer: "Muay Thai"
},
{
  question: "What is the name of the UFC's current lightweight champion?",
  options: ["Khabib Nurmagomedov", "Dustin Poirier", "Conor McGregor", "Charles Oliveira"],
  answer: "Charles Oliveira"
},
{
  question: "What is the name of the UFC's current middleweight champion?",
  options: ["Robert Whittaker", "Israel Adesanya", "Marvin Vettori", "Paulo Costa"],
  answer: "Israel Adesanya"
},
{
  question: "Which UFC fighter has the nickname 'The Notorious'?",
  options: ["Conor McGregor", "Nate Diaz", "Tony Ferguson", "Dustin Poirier"],
  answer: "Conor McGregor"
},
{
  question: "What is the name of the UFC's current heavyweight champion?",
  options: ["Francis Ngannou", "Stipe Miocic", "Derrick Lewis", "Jon Jones"],
  answer: "Francis Ngannou"
},
{
  question: "Which UFC fighter has the nickname 'The Spider'?",
  options: ["Anderson Silva", "Chris Weidman", "Luke Rockhold", "Vitor Belfort"],
  answer: "Anderson Silva"
}
];

var mmaBigContainer = document.getElementById("mma-quiz-container");
var mmaBiggerContainer = document.getElementById("mma-gigachad-container");
var mmaResultContainer = document.getElementById("mma-result-container");
var getResultMmaButton = document.getElementById("get-result-mma-button");

var mmaRefreshPage = document.getElementById("mma-refresh-page");
mmaRefreshPage.addEventListener("click",function(){
    location.reload();
});

if(mmaBigContainer.textContent.trim() === ""){

    const p = document.createElement("p");
    p.textContent = "Are you ready to start the quiz?";
    p.setAttribute("class","empty-container-p");


    const a = document.createElement("a");
    a.textContent = "I am ready!";
    a.setAttribute("href", "#");
    a.setAttribute("id","mma-quiz-button");
    a.setAttribute("onclick","createMmaQuiz()");
    a.setAttribute("class","start-button-page");

    mmaBigContainer.appendChild(p);
    mmaBigContainer.appendChild(a);

}

function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function createMmaQuiz(){

    const quizQuestions = shuffle(quiz3).slice(0, 10);


    let quizHTML = "";
    quizQuestions.forEach(function(q, i) {
    quizHTML += "<div class='quiz-container'><p>" + (i + 1) + ". " + q.question + "</p>";   
    quizHTML += '<input type="hidden" value="'+ q.answer + '" name="q' + i + 'correct">';
    q.options.forEach(function(opt) {
        quizHTML += '<label class="radio-button-container">' + opt + '';
        quizHTML += '<input type="radio" name="q' + i + '" value="' + opt + '">';
        quizHTML += '<span class="checkmark"></span>';
        quizHTML += "</label>";
    });
    quizHTML += "</div>";
  });

  getResultMmaButton.style.display = "block";
  mmaBigContainer.innerHTML = quizHTML;
}

getResultMmaButton.addEventListener("click", function() {
    // Calculate the user's score
    let score = 0;
    const quizQuestionsOne = mmaBigContainer.querySelectorAll("div");
    let allQuestionsAnswered = true;

    for(let i =0;i<quizQuestionsOne.length;i++){
        const radios = quizQuestionsOne[i].querySelectorAll("input[type=radio]");
        let anyRadioChecked = false;

        for(let j=0; j<radios.length;j++){
            if(radios[j].checked){
                anyRadioChecked = true;
                break;
            }
        }

        if(!anyRadioChecked){
            allQuestionsAnswered = false;
            break;
        }
    }

    if(!allQuestionsAnswered){
        alert("Please answer all questions before submitting!");
    }


    quizQuestionsOne.forEach(function(q, i) {
      const selected = q.querySelector("input:checked");

      const correctAnswer = q.querySelector("input[type=hidden][name=q"+ i + "correct]");
      const correctAnswerValue = correctAnswer.value;
      console.log(correctAnswerValue);
      if (selected.value == correctAnswer.value) {
        score++;
      }
    });

    const mmaGoodResultImages = ["mma-good-result1.jpg","mma-good-result2.jpg","mma-good-result3.jpg","mma-good-result4.jpg","mma-good-result5.jpg"];
    const mmaBadResultImages = ["mma-bad-result1.jpg","mma-bad-result2.avif","mma-bad-result3.webp","mma-bad-result4.jpg","mma-bad-result5.avif"];
    
    function generateRandomPicture(array){
        var randomPicture = Math.floor(Math.random() * array.length);
        return array[randomPicture];
    }

    var randomGoodResultImage = generateRandomPicture(mmaGoodResultImages);
    var randomBadResultImage = generateRandomPicture(mmaBadResultImages);

    // Display the user's score
    var mmaResultSmallContainer = document.getElementById("mma-result-small-container");
    mmaResultContainer.style.display = "block";
    mmaBiggerContainer.style.display = "none";

    let resultPageHTML = "";
    if(score < 5){
        resultPageHTML += '<h1 id="submit-page-heading">Better luck next time!</h1>';
        resultPageHTML += '<h2><span id="boxing-result-points">You got ' + score + ' out of 10 question correct!</span></h2>';
        resultPageHTML += '<img src="images/' + randomBadResultImage + '" alt="">';
    }else if(score > 5){
        resultPageHTML += '<h1 id="submit-page-heading">Congratulations!</h1>';
        resultPageHTML += '<h2><span id="boxing-result-points">You got ' + score + ' out of 10 question correct!</span></h2>';
        resultPageHTML += '<img src="images/' + randomGoodResultImage + '" alt="">';
    }


    mmaResultSmallContainer.innerHTML = resultPageHTML;
  });